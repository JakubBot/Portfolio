{"version":3,"sources":["components/common/pixiImagesController.js"],"names":["window","PIXI","LiquidImagesController","constructor","this","DOM","image","options","bindTimelineToScroll","images","document","querySelectorAll","app","init","liquidImages","console","error","concat","i","length","canvasWidth","clientWidth","canvasHeight","clientHeight","width","height","transparent","resolution","devicePixelRatio","resizeTo","appendChild","view","imageFile","getAttribute","from","name","anchor","set","position","x","y","stage","addChild","displacementMapFile","displacementMap","displacementFilter","DisplacementFilter","filterArea","screen","filters","displacementTimeline","gsap","timeline","paused","canvasElement","querySelector","add","fromTo","autoAlpha","duration","ease","scale","onComplete","ScrollScene","triggerElement","triggerHook","reverseSpeed"],"mappings":"6HAAA,4EAIAA,OAAOC,KAAOA,EAKC,MAAMC,EACnBC,cAKEC,KAAKC,IAAM,CACTC,MAAO,oBAGTF,KAAKG,QAAU,CACbC,sBAAsB,GAOxBJ,KAAKK,OAASC,SAASC,iBAAiBP,KAAKC,IAAIC,OAEjDF,KAAKQ,IAAM,KAGbC,OACsB,OAAhBT,KAAKK,OACPL,KAAKU,eAELC,QAAQC,MAAM,GAADC,OAAIb,KAAKC,IAAIC,MAAK,gCAInCQ,eACE,IAAK,IAAII,EAAI,EAAGA,EAAId,KAAKK,OAAOU,OAAQD,IAAK,CAC3C,MAAME,EAAchB,KAAKK,OAAOS,GAAGG,YAC7BC,EAAelB,KAAKK,OAAOS,GAAGK,aAEpCnB,KAAKQ,IAAM,IAAIX,cAAiB,CAC9BuB,MAAOJ,EACPK,OAAQH,EACRI,aAAa,EACbC,WAAY3B,OAAO4B,iBACnBC,SAAUzB,KAAKK,OAAOS,KAGxBd,KAAKK,OAAOS,GAAGY,YAAY1B,KAAKQ,IAAImB,MAEpC,MAAMC,EAAY5B,KAAKK,OAAOS,GAAGe,aAAa,cACxC3B,EAAQL,SAAYiC,KAAKF,GAE/B1B,EAAM6B,KAAOH,EACb1B,EAAMkB,MAAQJ,EACdd,EAAMmB,OAASH,EAEfhB,EAAM8B,OAAOC,IAAI,IAEjB/B,EAAMgC,SAASC,EAAInB,EAAc,EACjCd,EAAMgC,SAASE,EAAIlB,EAAe,EAElClB,KAAKQ,IAAI6B,MAAMC,SAASpC,GAExB,MAAMqC,EAAsBvC,KAAKK,OAAOS,GAAGe,aACzC,yBAEIW,EAAkB3C,SAAYiC,KAAKS,GACnCE,EAAqB,IAAI5C,UAAa6C,mBAC1CF,GAGFxC,KAAKQ,IAAI6B,MAAMM,WAAa3C,KAAKQ,IAAIoC,OACrC5C,KAAKQ,IAAI6B,MAAMQ,QAAU,CAACJ,GAC1BzC,KAAKQ,IAAI6B,MAAMC,SAASE,GACxBA,EAAgBT,KAAOQ,EACvBC,EAAgBpB,MAAQJ,EACxBwB,EAAgBnB,OAASH,EAEzBsB,EAAgBR,OAAOC,IAAI,IAE3BO,EAAgBN,SAASE,EAAIlB,EAAe,EAC5CsB,EAAgBN,SAASC,EAAInB,EAAc,EAE3C,MAAM8B,EAAuBC,IAAKC,SAAS,CACzCC,QAAQ,IAGJC,EAAgBlD,KAAKK,OAAOS,GAAGqC,cAAc,UAEnDL,EACGM,IAAI,SACJC,OACCH,EACA,CACEI,UAAW,GAEb,CACEC,SAAU,GACVD,UAAW,EACXE,KAAM,cAER,SAEDH,OACCH,EACA,CACEO,MAAO,KAET,CACEF,SAAU,EACVE,MAAO,EACPD,KAAM,cAER,SAEDH,OACCZ,EAAmBgB,MACnB,CACEtB,EAAG,IACHC,EAAG,KAEL,CACEmB,SAAU,IACVpB,EAAG,EACHC,EAAG,EACHoB,KAAM,aACNE,WAAYA,QAEd,UAGsC,IAAtC1D,KAAKG,QAAQC,qBACf,IAAIuD,IAAY,CACdC,eAAgB5D,KAAKK,OAAOS,GAC5B+C,YAAa,EACbN,SAAU,OACVR,KAAM,CACJC,SAAUF,KAId,IAAIa,IAAY,CACdC,eAAgB5D,KAAKK,OAAOS,GAC5B+C,YAAa,GACbd,KAAM,CACJC,SAAUF,EACVgB,aAAc","file":"static/js/19.e9d97a4a.chunk.js","sourcesContent":["import * as PIXI from \"pixi.js\";\nimport gsap from \"gsap\";\nimport { ScrollScene } from \"scrollscene\";\n\nwindow.PIXI = PIXI;\n\n/**\n * Liquid images reveal on scroll\n */\nexport default class LiquidImagesController {\n  constructor() {\n    /**\n     *\n     * @type {{imageContainer: string}}\n     */\n    this.DOM = {\n      image: \".js-liquid-image\",\n    };\n\n    this.options = {\n      bindTimelineToScroll: false,\n    };\n\n    /**\n     *\n     * @returns {NodeListOf<Element>}\n     */\n    this.images = document.querySelectorAll(this.DOM.image);\n\n    this.app = null;\n  }\n\n  init() {\n    if (this.images !== null) {\n      this.liquidImages();\n    } else {\n      console.error(`${this.DOM.image} does not exist in the DOM!`);\n    }\n  }\n\n  liquidImages() {\n    for (let i = 0; i < this.images.length; i++) {\n      const canvasWidth = this.images[i].clientWidth;\n      const canvasHeight = this.images[i].clientHeight;\n\n      this.app = new PIXI.Application({\n        width: canvasWidth,\n        height: canvasHeight,\n        transparent: true,\n        resolution: window.devicePixelRatio,\n        resizeTo: this.images[i],\n      });\n\n      this.images[i].appendChild(this.app.view);\n\n      const imageFile = this.images[i].getAttribute(\"data-image\");\n      const image = PIXI.Sprite.from(imageFile);\n\n      image.name = imageFile;\n      image.width = canvasWidth;\n      image.height = canvasHeight;\n\n      image.anchor.set(0.5);\n\n      image.position.x = canvasWidth / 2;\n      image.position.y = canvasHeight / 2;\n\n      this.app.stage.addChild(image);\n\n      const displacementMapFile = this.images[i].getAttribute(\n        \"data-displacement-map\"\n      );\n      const displacementMap = PIXI.Sprite.from(displacementMapFile);\n      const displacementFilter = new PIXI.filters.DisplacementFilter(\n        displacementMap\n      );\n\n      this.app.stage.filterArea = this.app.screen;\n      this.app.stage.filters = [displacementFilter];\n      this.app.stage.addChild(displacementMap);\n      displacementMap.name = displacementMapFile;\n      displacementMap.width = canvasWidth;\n      displacementMap.height = canvasHeight;\n\n      displacementMap.anchor.set(0.5);\n\n      displacementMap.position.y = canvasHeight / 2;\n      displacementMap.position.x = canvasWidth / 2;\n\n      const displacementTimeline = gsap.timeline({\n        paused: true,\n      });\n\n      const canvasElement = this.images[i].querySelector(\"canvas\");\n\n      displacementTimeline\n        .add(\"start\")\n        .fromTo(\n          canvasElement,\n          {\n            autoAlpha: 0,\n          },\n          {\n            duration: 0.4,\n            autoAlpha: 1,\n            ease: \"power3.out\",\n          },\n          \"start\"\n        )\n        .fromTo(\n          canvasElement,\n          {\n            scale: 1.5,\n          },\n          {\n            duration: 1,\n            scale: 1,\n            ease: \"power3.out\",\n          },\n          \"start\"\n        )\n        .fromTo(\n          displacementFilter.scale,\n          {\n            x: 150,\n            y: 150,\n          },\n          {\n            duration: 1.6,\n            x: 0,\n            y: 0,\n            ease: \"power3.out\",\n            onComplete: () => {},\n          },\n          \"start\"\n        );\n\n      if (this.options.bindTimelineToScroll === true) {\n        new ScrollScene({\n          triggerElement: this.images[i],\n          triggerHook: 1,\n          duration: \"100%\",\n          gsap: {\n            timeline: displacementTimeline,\n          },\n        });\n      } else {\n        new ScrollScene({\n          triggerElement: this.images[i],\n          triggerHook: 0.8,\n          gsap: {\n            timeline: displacementTimeline,\n            reverseSpeed: 2,\n          },\n        });\n      }\n    }\n  }\n}\n"],"sourceRoot":""}